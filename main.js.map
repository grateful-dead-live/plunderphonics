{"version":3,"sources":["webpack:///./node_modules/n3/lib sync ^\\.\\/N3.*$","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/dead-api.service.ts","webpack:///./src/app/dead-feature.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///vertx (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["var map = {\n\t\"./N3Lexer\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Lexer.js\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Parser\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Parser.js\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Store\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3Store.js\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3StreamParser\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamParser.js\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamWriter\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3StreamWriter.js\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3Util\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Util.js\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Writer\": \"./node_modules/n3/lib/N3Writer.js\",\n\t\"./N3Writer.js\": \"./node_modules/n3/lib/N3Writer.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/n3/lib sync recursive ^\\\\.\\\\/N3.*$\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div> <!--(click)='playBeginnings()'-->\\n  <br>\\n  <h1 style=\\\"text-transform: capitalize;\\\">{{ SONGNAME }}</h1>\\n  <div class=\\\"images\\\">\\n    <span class=\\\"z-depth image\\\" flex=\\\"50\\\"\\n        [hidden]=\\\"!currentImages[0]\\\" [@fade]=\\\"imageStates[0]\\\">\\n      <img *ngFor=\\\"let i of currentImages[0]\\\" [src]=\\\"i\\\" width=\\\"21%\\\"/>\\n      <h2>{{ currentCaptions[0] }}</h2>\\n    </span>\\n    <span class=\\\"z-depth image\\\" flex=\\\"50\\\"\\n        [hidden]=\\\"!currentImages[1]\\\" [@fade]=\\\"imageStates[1]\\\">\\n      <img *ngFor=\\\"let i of currentImages[1]\\\" [src]=\\\"i\\\" width=\\\"21%\\\"/>\\n      <h2>{{ currentCaptions[1] }}</h2>\\n    </span>\\n  </div>\\n</div>\"","import * as _ from 'lodash';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { trigger, style, animate, transition, state } from '@angular/animations';\nimport { AutoDj, DecisionType, TransitionType } from 'auto-dj';\nimport { DeadApiService } from './dead-api.service';\nimport { DeadFeatureService } from './dead-feature.service';\nimport { LiveFeatureService } from './live-feature.service';\nimport { SongDetails, DeadEventInfo } from './types';\n//import * as ALIGNMENT from '../assets/meandmyuncle.json';\n//import * as ALIGNMENT from '../assets/box of rain-output.json';\n//import * as ALIGNMENT from '../assets/brokedown palace-output.json';\n//import * as ALIGNMENT from '../assets/casey jones-output.json';\n//import * as ALIGNMENT from '../assets/china cat sunflower-output.json';\n//import * as ALIGNMENT from '../assets/china doll-output.json';\n//////import * as ALIGNMENT from '../assets/cosmic charlie-output.json';\n\ninterface Alignment {\n  title: string,\n  versions: string[],\n  tunings: number[],\n  segments: Segment[][],\n  timeline: SegmentNode[][]\n}\n\ninterface Segment {\n  start: number,\n  duration: number\n}\n\nexport interface SegmentNode {\n  point: number[],\n  version: number,\n  time: number\n}\n\nconst TEST = ['https://images-na.ssl-images-amazon.com/images/I/91PMUsUyKzL._SL1500_.jpg',\n'https://images.fineartamerica.com/images-medium-large-5/grateful-dead-fantasy-amanda-paul.jpg',\n'https://i.ebayimg.com/images/g/alAAAOSw4A5Y2eI9/s-l300.jpg']\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n  animations: [\n    trigger('fade', [\n      state('in', style({ 'opacity': '1' })),\n      state('out', style({ 'opacity': '0' })),\n      transition('* <=> *', [\n        animate(2000)\n      ])\n    ])\n  ]\n})\nexport class AppComponent implements OnInit {\n\n  //private SONGNAME = 'Me and My Uncle';\n  //private SONGNAME = 'Sugar Magnolia';\n  //private SONGNAME = 'Playing in the Band';\n  //private SONGNAME = 'Jack Straw';\n  //private SONGNAME = 'Truckin';\n  private eventInfos: DeadEventInfo[];\n  private SONGNAME = 'Casey Jones';\n  private COUNT = 30;\n  private SKIP = 3;\n  private CHUNK_LENGTH = 60;\n  private CHUNK_START = 30;\n  private dj: AutoDj;\n  protected songDetails: SongDetails;\n  protected currentImages: string[][] = [null, null];\n  protected currentCaptions: string[] = ['', ''];\n  protected imageStates: string[] = ['out', 'in']\n  protected currentImagesIndex = 0;\n  //private alignment: Alignment = ALIGNMENT.default;\n\n  constructor(private apiService: DeadApiService,\n      featureService: DeadFeatureService, private activatedRoute: ActivatedRoute) {\n    this.dj = new AutoDj({//featureService: featureService,\n        decisionType: DecisionType.Default,\n        defaultTransitionType: TransitionType.Crossfade,\n        scheduleAheadTime: 4,\n        loadAheadTime: 6,\n        useWorkers: false\n      });\n    this.activatedRoute.queryParams.subscribe(params => {\n        this.SONGNAME = params['song'] || this.SONGNAME// || 'Looks Like Rain';\n        console.log(this.SONGNAME); // Print the parameter to the console.\n    });\n  }\n\n  async ngOnInit() {\n    await this.dj.isReady();\n    this.eventInfos = await this.apiService.getEvents();\n    //const song = _.toLower(this.SONGNAME).split(' ').join('');\n    if (this.SONGNAME) {\n      this.songDetails = await this.apiService\n        .getDiachronicSongDetails(this.SONGNAME, this.COUNT, this.SKIP);\n    }\n    this.playBeginnings();\n    //this.playCoherently();\n  }\n\n  private async playBeginnings() {\n    const audioUris = _.values(_.mapValues(this.songDetails.audio,\n      (a,r) => this.apiService.toChunkUri(r, a[0].filename, this.CHUNK_START,\n        this.CHUNK_START+this.CHUNK_LENGTH)));\n    //console.log(audioUris)\n    this.dj.playDjSet(audioUris, 12, true, 4); //bars per song, cue point auto\n    //this.dj.transitionToTrack(audioUris[0]);\n    let index = 1;\n    this.dj.getTransitionObservable().subscribe(transition => {\n      console.log(transition)\n      if (transition && transition.names) {\n        this.nextImage(this.songDetails.eventIds[index]);\n        index++;\n      }\n    });\n  }\n\n  /*private async playCoherently() {\n    this.SONGNAME = this.alignment.title;\n    console.log(this.SONGNAME)\n    const featureService = new LiveFeatureService();\n    const versionsPlayed: number[] = [];\n    const BARS = 6;\n    const TRANS = 1; //two transition, two alone, two transition\n    const OFFSET = 0;\n    const audioChunks = _.range(0,\n        Math.floor((this.alignment.timeline.length-OFFSET)/(BARS+TRANS)-1)).map(i => {\n      const START = OFFSET+(i*(BARS+TRANS));\n      const starts = this.alignment.timeline[START];\n      const ends = this.alignment.timeline[START+BARS+(2*TRANS)];\n      const versions = _.intersection(\n        ...[starts, ends].map(b => b.map(n => n.version)))\n        .filter(v => !versionsPlayed.includes(v));\n      if (versions.length) {\n        const version = _.sample(versions);\n        //const version = versions[0];\n        versionsPlayed.push(version);\n        const start = starts.filter(n => n.version === version)[0].time;\n        const end = ends.filter(n => n.version === version)[0].time;\n        const audio = this.alignment.versions[version];\n        const audioUri = this.apiService.toLmaUri(audio.split('/')[0], audio.split('/')[1]);\n        /*const audioUri = this.apiService.toChunkUri(\n          audio.split('/')[0], audio.split('/')[1],\n          this.alignment.segments[version][start].start,\n          this.alignment.segments[version][end].start);*\n        const offset = this.alignment.segments[version][start].start;\n        const bars = _.range(start, end+1).map(i =>\n          this.alignment.segments[version][i].start)// - offset);\n        let beats = _.flatten(bars.slice(0,-1).map((b,i) =>\n          _.range(0,4).map(j => b+j*(bars[i+1]-b)/4)));\n        beats = beats.map(b => b / this.alignment.tunings[i]);\n        //console.log(beats[0])\n        featureService.setBeats(audioUri, beats);\n        return audioUri;\n      }\n    }).filter(a => a);\n    this.dj.setFeatureService(featureService);\n    this.dj.playDjSet(audioChunks, BARS+(TRANS*2), false, TRANS);\n\n    let index = 0;\n    this.dj.getTransitionObservable().subscribe(transition => {\n      console.log(transition)\n      if (transition && transition.names) {\n        //http://archive.org/download/gd1990-09-15.sbd.martman.7746.sbefail.shnf/gd1990-09-15d1t09.mp3\n        const rec = audioChunks[index].split('/').slice(-2)[0];\n        console.log(rec)\n        const eventId = this.eventInfos.filter(i => i.recordings.some(r => r.etreeId === rec))[0];\n        this.nextImage(eventId.id);\n        index++;\n      }\n    });\n  }*/\n\n  protected async nextImage(eventId: string) {\n    const info = this.eventInfos.filter(e => e.id === eventId)[0];\n    const details = await this.apiService.getEventDetails(eventId);\n    let infoStrings = [info.date];\n    if (info.venue) infoStrings.push(info.venue);\n    if (info.location) infoStrings.push(info.location);\n    const i = this.currentImagesIndex % 2;\n    this.currentCaptions[i] = infoStrings.join(', ');\n    this.currentImages[i] = _.concat(\n      [details.venue.thumbnail, details.location.thumbnail],\n      details.artifacts.map(a => a.thumbnail || a.image))\n      .filter(i=>i).slice(0,4);\n    setTimeout(() => this.toggleState(), 1000); //images take time to load!\n  }\n\n  protected toggleState() {\n    this.imageStates.forEach((s,i) => this.imageStates[i] = s === 'in' ? 'out' : 'in');\n    this.currentImagesIndex++;\n  }\n\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { AppComponent } from './app.component';\nimport { DeadApiService } from './dead-api.service';\nimport { DeadFeatureService } from './dead-feature.service';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    RouterModule.forRoot([])\n  ],\n  providers: [DeadApiService, DeadFeatureService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\r\nimport { SafeResourceUrl } from '@angular/platform-browser';\r\nimport { DeadEventInfo, DeadEventDetails, Location, Venue, SongInfo,\r\n  SongDetails, ArtistDetails } from './types';\r\n\r\nexport interface Recording {\r\n  id: string,\r\n  url: SafeResourceUrl\r\n}\r\n\r\n@Injectable()\r\nexport class DeadApiService {\r\n\r\n  private API_URL = \"https://grateful-dead-api.herokuapp.com/\";\r\n  //private API_URL = \"http://localhost:8060/\";\r\n  private ARCHIVE_URI = 'http://archive.org/download/';\r\n\r\n  constructor() {}\r\n\r\n  async getEvents(): Promise<DeadEventInfo[]> {\r\n    return this.getJsonFromApi('events');\r\n  }\r\n\r\n  async getEventDetails(eventId: string): Promise<DeadEventDetails> {\r\n    return this.getJsonFromApi('details?event='+encodeURIComponent(eventId))\r\n  }\r\n  \r\n  getLocation(locationId: string): Promise<Location> {\r\n    return this.getJsonFromApi('location?id='+encodeURIComponent(locationId));\r\n  }\r\n  \r\n  getVenue(venueId: string): Promise<Venue> {\r\n    return this.getJsonFromApi('venue?id='+encodeURIComponent(venueId));\r\n  }\r\n  \r\n  getSetlist(eventId: string): Promise<SongInfo[]> {\r\n    return this.getJsonFromApi('setlist?event='+encodeURIComponent(eventId));\r\n  }\r\n  \r\n  getSong(songId: string): Promise<SongDetails> {\r\n    return this.getJsonFromApi('song?id='+encodeURIComponent(songId));\r\n  }\r\n  \r\n  getArtistDetails(artistId: string): Promise<ArtistDetails> {\r\n    return this.getJsonFromApi('artist?id='+encodeURIComponent(artistId));\r\n  }\r\n\r\n  getFeatureSummary(audioUri: string): Promise<{}> {\r\n    return this.getJsonFromApi('featuresummary?audiouri='+encodeURIComponent(audioUri));\r\n  }\r\n  \r\n  getEventInfo(audioUri: string): Promise<string[]> {\r\n    return this.getJsonFromApi('eventinfo?audiouri='+encodeURIComponent(audioUri));\r\n  }\r\n  \r\n  getDiachronicSongDetails(songName: string, count = 10, skip = 0): Promise<SongDetails> {\r\n    return this.getJsonFromApi('diachronic?songname='+encodeURIComponent(songName)\r\n      +\"&count=\"+count+\"&skip=\"+skip);\r\n  }\r\n  \r\n  toChunkUri(recordingId: string, filename: string, fromSecond?: number, toSecond?: number) {\r\n    const audioUri = this.ARCHIVE_URI+recordingId+'/'+filename;\r\n    const segmentDef = fromSecond != null && toSecond != null ?\r\n      '&fromsecond='+fromSecond+'&tosecond='+toSecond : '';\r\n    return encodeURI(this.API_URL+'audiochunk?filename='+audioUri+segmentDef);\r\n  }\r\n  \r\n  toLmaUri(recordingId: string, filename: string) {\r\n    return this.ARCHIVE_URI+recordingId+'/'+filename;\r\n  }\r\n\r\n  async getJsonFromApi(path: string): Promise<any> {\r\n    return fetch(this.API_URL+path)\r\n      .then(r => r.text())\r\n      .then(t => JSON.parse(t))\r\n      .catch(e => console.log(e));\r\n  }\r\n\r\n}","import { Injectable } from '@angular/core';\nimport { FeatureService } from 'auto-dj';\nimport { DeadApiService } from './dead-api.service';\n\n@Injectable()\nexport class DeadFeatureService implements FeatureService {\n\n  private features = new Map<string, {}>();\n\n  constructor(private apiService: DeadApiService) {}\n\n  async getBeats(audioUri: string) {\n    return this.getFeature(audioUri, \"beats\");\n  }\n\n  async getKeys(audioUri: string) {\n    return this.getFeature(audioUri, \"key\");\n  }\n\n  async getLoudnesses(audioUri: string) {\n    return this.getFeature(audioUri, \"loudness\");\n  }\n  \n  private async getFeature(audioUri: string, featureName: string) {\n    const features = await this.getFeatures(audioUri);\n    if (features) return features[featureName];\n  }\n\n  private async getFeatures(audioUri: string): Promise<{}> {\n    if (!this.features.has(audioUri)) {\n      this.features.set(audioUri, await this.apiService.getFeatureSummary(audioUri));\n    }\n    return this.features.get(audioUri);\n  }\n\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n","/* (ignored) */"],"sourceRoot":""}